# Windows環境で動作するGemini用デバッグプロンプト集
# Claude CLI MCP Server - 非同期版Windows環境テスト用
# 注: GeminiはWindows上で動作し、WSL経由でClaude CLIを実行します

## 重要な前提条件
- Gemini自体はWindows上で動作
- Claude CLIはWSL内にインストールされている
- MCPサーバーはWSL経由でClaude CLIを呼び出す
- 現在のバージョンは非同期実行に統一済み

## 1. 基本動作確認（Windows環境）
# test_claude_cliツールの動作確認
- prompt: "test_claude_cliツールを実行して、WSL経由でClaude CLIが正しく動作するか確認してください"

# execute_claudeツールの基本動作確認
- prompt: "execute_claudeツールを使って「こんにちは」とClaudeに送信してください"

## 2. 非同期実行の確認
# タイムアウトしないか確認
- prompt: "execute_claudeで「今日の日付と時刻を教えてください」と送信してください"

# レスポンスが正しく返ってくるか
- prompt: "execute_claudeで「1から10までの数字を数えてください」と送信してください"

## 3. セッション継続性テスト（Windows環境）
# 初回実行（新規セッション作成）
- prompt: "execute_claudeで「私は田中花子です」とClaudeに伝えてください"

# セッション継続確認
- prompt: "execute_claudeで「私の名前を覚えていますか？」と聞いてください"

# 追加の会話
- prompt: "execute_claudeで「Windows環境からこんにちは」と送信してください"

## 4. エンコーディングテスト（Windows特有）
# 日本語処理（cp932問題の確認）
- prompt: "execute_claudeで「日本語の処理は問題ありませんか？」と送信してください"

# 基本的な記号
- prompt: "execute_claudeで「記号のテスト：！＠＃＄％＾＆＊（）」と送信してください"

# 英数字混在
- prompt: "execute_claudeで「Test123 テスト456」と送信してください"

## 5. ファイルコンテキストテスト（Windows環境）
# README.mdを使用（WSLパス形式）
- prompt: "execute_claude_with_contextツールを使って、C:\\prj\\AI\\prg\\mcp-claude-context-continuity\\README.mdファイルの内容について「このプロジェクトの概要を教えてください」と質問してください"

## 6. エラーハンドリングテスト
# 存在しないファイル（Windowsパス）
- prompt: "execute_claude_with_contextで、存在しないファイル「C:\\prj\\AI\\prg\\mcp-claude-context-continuity\\notfound.txt」について質問してみてください"

## 7. 履歴とセッション管理
# 実行履歴の確認
- prompt: "get_execution_historyツールで直近3件の実行履歴を取得してください"

# セッション情報
- prompt: "get_current_sessionツールで現在のセッションIDを確認してください"

# セッションリセット
- prompt: "reset_sessionツールでセッションをリセットしてください"

# リセット後の確認
- prompt: "execute_claudeで「私の名前を覚えていますか？」と聞いてください（リセットされているはずです）"

## 8. パフォーマンステスト
# 少し長めのプロンプト
- prompt: "execute_claudeで「Windowsの歴史について簡潔に説明してください」と送信してください"

## 9. 連続実行テスト
# 複数のコマンドを連続実行
- prompt: "以下を順番に実行してください：1) execute_claudeで「こんにちは」、2) execute_claudeで「さようなら」、3) get_execution_historyで履歴を確認"

## デバッグ時の確認ポイント（Windows環境）
1. WSL経由のコマンド実行が成功しているか
2. 非同期実行がタイムアウトしていないか
3. 日本語が文字化けしていないか（cp932関連）
4. session_idが正しく保存・使用されているか
5. ファイルパスの変換（Windows→WSL形式）が適切か
6. エラーメッセージが適切に表示されるか

## ログファイル確認
実行後は以下を確認：
- C:\prj\AI\prg\mcp-claude-context-continuity\claude_command_debug.log
- コマンドが「wsl -- /home/...」形式になっているか
- 実行時間が異常に長くないか（非同期実行の確認）

## Windows環境特有の注意点
- WSLが起動していることを確認
- Claude CLIがWSL内で`claude --version`で動作することを事前確認
- ファイルパスはWindows形式で指定するが、内部でWSL形式に変換される
- 絵文字や特殊記号は避ける（cp932の制限）